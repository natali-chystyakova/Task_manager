

<li id="task-{{ task.id }}" class="list-group-item">

    <div class="d-flex justify-content-between align-items-center">
        <div>

            <!-- Toggle статус -->
<!--            <form-->
<!--                hx-post="{% url 'task_scheduler:task_toggle_status' task.id %}"-->
<!--                hx-target="#task-{{ task.id }}"-->
<!--                hx-swap="outerHTML"-->
<!--            >-->
<!--                {% csrf_token %}-->
<!--                <input class="form-check-input me-2"-->
<!--                       type="checkbox"-->
<!--                       onchange="this.form.submit()"-->
<!--                       {% if task.status == 'done' %}checked{% endif %}>-->
<!--            </form>-->

<!--            <span class="{% if task.status == 'done' %}text-decoration-line-through text-muted{% endif %}">-->
<!--                {{ task.name }}-->
<!--            </span>-->

    <input class="form-check-input me-2"
           type="checkbox"
           {% if task.status == 'done' %}checked{% endif %}

           hx-post="{% url 'task_scheduler:task_toggle_status' task.id %}"
           hx-target="#task-{{ task.id }}"
           hx-swap="outerHTML"
           hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>

    <span class="{% if task.status == 'done' %}text-decoration-line-through text-muted{% endif %}">
        {{ task.name }}
    </span>

        </div>

        <button class="btn btn-sm btn-light"
                data-bs-toggle="collapse"
                data-bs-target="#collapse-{{ task.id }}">
            ▼
        </button>
    </div>

    <div class="collapse mt-2" id="collapse-{{ task.id }}">
        <div class="card card-body">

            {% if task.deadline %}
                <p><strong>Deadline:</strong> {{ task.deadline|date:"d M Y" }}</p>
            {% else %}
                <p><strong>Deadline:</strong> —</p>
            {% endif %}

            <p><strong>Status:</strong> {{ task.status }}</p>
            <p><strong>Priority:</strong> {{ task.priority }}</p>


            <button
                hx-get="{% url 'task_scheduler:task_update' task.id %}"
                hx-target="#task-{{ task.id }}"
                hx-swap="outerHTML"
                 class="btn btn-success btn-sm"
            >
            Edit
            </button>

            <button
                hx-get="{% url 'task_scheduler:task_delete' task.id %}"
                hx-target="#task-{{ task.id }}"
                hx-swap="outerHTML"
                class="btn btn-danger btn-sm"
            >
                Delete
            </button>

        </div>
    </div>

</li>
